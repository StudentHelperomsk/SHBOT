from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes, Defaults
from datetime import datetime
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler("bot.log"),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

# –í–∞—à Telegram ID (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π ID)
ADMIN_CHAT_ID = 8237782122  # –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® –†–ï–ê–õ–¨–ù–´–ô ID

async def notify_admin(context: ContextTypes.DEFAULT_TYPE, user, action: str):
    """–§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"""
    try:
        username = f"@{user.username}" if user.username else "–ù–µ—Ç —é–∑–µ—Ä–Ω–µ–π–º–∞"
        message = (
            f"üë§ –ù–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –±–æ—Ç–µ:\n"
            f"‚Ä¢ –ò–º—è: {user.first_name}\n"
            f"‚Ä¢ –Æ–∑–µ—Ä–Ω–µ–π–º: {username}\n"
            f"‚Ä¢ ID: {user.id}\n"
            f"‚Ä¢ –î–µ–π—Å—Ç–≤–∏–µ: {action}\n"
            f"‚Ä¢ –í—Ä–µ–º—è: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        )
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
        await context.bot.send_message(
            chat_id=ADMIN_CHAT_ID,
            text=message
        )
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {e}")

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
def get_main_menu_keyboard():
    keyboard = [
        [InlineKeyboardButton("üöÄ –°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑", url="https://t.me/SH_Omsk")],
        [
            InlineKeyboardButton("üíé –ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞", callback_data="ref"),
            InlineKeyboardButton("üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏–∏", callback_data="guarantess")
        ],
        [
            InlineKeyboardButton("‚Ü©Ô∏è –£—Å–ª–æ–≤–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞", callback_data="refund"),
            InlineKeyboardButton("‚ÑπÔ∏è –û –Ω–∞—Å", callback_data="about")
        ],
        [
            InlineKeyboardButton("üí∏ –¶–µ–Ω—ã", callback_data="price"),
            InlineKeyboardButton("üéÅ –ê–∫—Ü–∏–∏", callback_data="stocks")
        ],
        [
            InlineKeyboardButton("üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞", url="https://t.me/SH_Omsk"),
            InlineKeyboardButton("üéì –î–∏–ø–ª–æ–º–Ω—ã–µ —Ä–∞–±–æ—Ç—ã", callback_data="diploma")
        ],
        [
            InlineKeyboardButton("üì¢ –ù–∞—à –∫–∞–Ω–∞–ª", url="https://t.me/SH_Public")
        ]
    ]
    return InlineKeyboardMarkup(keyboard)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–µ–Ω—é –∞–∫—Ü–∏–π
def get_stocks_menu_keyboard():
    keyboard = [
        [InlineKeyboardButton("üöÄ –°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑", url="https://t.me/SH_Omsk")],
        [InlineKeyboardButton("ü•á –ê–∫—Ü–∏—è '–ü–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑'", callback_data="stock1")],
        [InlineKeyboardButton("üë• –ê–∫—Ü–∏—è '–ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞'", callback_data="ref")],
        [InlineKeyboardButton("üìö –ê–∫—Ü–∏—è '–î–≤–µ —Ä–∞–±–æ—Ç—ã'", callback_data="stock2")],
        [InlineKeyboardButton("üì¢ –ê–∫—Ü–∏—è '5% –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É'", callback_data="stock3")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
    ]
    return InlineKeyboardMarkup(keyboard)

def get_public_link_keyboard():
    keyboard = [
        [InlineKeyboardButton("üöÄ –°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑", url="https://t.me/SH_Omsk")],
        [InlineKeyboardButton("üì¢ –ù–∞—à –∫–∞–Ω–∞–ª", url="https://t.me/SH_Public")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–∫—Ü–∏—è–º", callback_data="stocks")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
    ]
    return InlineKeyboardMarkup(keyboard)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞–∫—Ü–∏–π
def get_stock_detail_keyboard():
    keyboard = [
        [InlineKeyboardButton("üöÄ –°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑", url="https://t.me/SH_Omsk")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –∫ –∞–∫—Ü–∏—è–º", callback_data="stocks")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
    ]
    return InlineKeyboardMarkup(keyboard)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
def get_common_keyboard():
    keyboard = [
        [InlineKeyboardButton("üöÄ –°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑", url="https://t.me/SH_Omsk")],
        [InlineKeyboardButton("‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="main_menu")]
    ]
    return InlineKeyboardMarkup(keyboard)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user = update.effective_user
    logger.info(f"User started bot: ID={user.id}, Username=@{user.username}")
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
    await notify_admin(context, user, "–ó–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞ (/start)")
    
    reply_markup = get_main_menu_keyboard()
    await update.message.reply_text(
        "<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Student Helper! üéì</b>\n\n"
        "<b>–ú—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º.</b>\n\n"
        "<b>üìå –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</b>\n"
        "‚Ä¢ –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á\n" 
        "‚Ä¢ –ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –ß–µ—Ä—Ç–µ–∂–∏ –≤ –ö–û–ú–ü–ê–°\n"
        "‚Ä¢ –†–∞—Å—á–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã\n\n"
        "<b>‚ö°Ô∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>\n"
        "‚Ä¢ –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ì–û–°–¢–æ–≤ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤\n"
        "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å—Ä–æ–∫–æ–≤\n"
        "‚Ä¢ –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n"
        "‚Ä¢ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã\n\n"
        "<b>üëá –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:</b>",
        reply_markup=reply_markup
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    query = update.callback_query
    user = update.effective_user
    await query.answer()
    
    data = query.data
    
    # –°–ª–æ–≤–∞—Ä—å –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è callback_data –≤ —á–∏—Ç–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫
    button_names = {
        "ref": "üíé –ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞",
        "guarantess": "üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏–∏",
        "refund": "‚Ü©Ô∏è –£—Å–ª–æ–≤–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞", 
        "about": "‚ÑπÔ∏è –û –Ω–∞—Å",
        "price": "üí∏ –¶–µ–Ω—ã",
        "stocks": "üéÅ –ê–∫—Ü–∏–∏",
        "stock1": "ü•á –ê–∫—Ü–∏—è '–ü–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑'",
        "stock2": "üìö –ê–∫—Ü–∏—è '–î–≤–µ —Ä–∞–±–æ—Ç—ã'",
        "stock3": "üì¢ –ê–∫—Ü–∏—è '5% –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É'",
        "main_menu": "‚¨ÖÔ∏è –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
        "diploma": "üéì –î–∏–ø–ª–æ–º–Ω—ã–µ —Ä–∞–±–æ—Ç—ã"
    }
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏
    button_name = button_names.get(data, data)
    await notify_admin(context, user, f"–ù–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É: {button_name}")
    
    if data == "guarantess":
        text = (
            "üõ°Ô∏è <b>–ì–∞—Ä–∞–Ω—Ç–∏–∏ –æ—Ç Student Helper</b>\n\n"
        "<b>–ú—ã –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º:</b>\n\n"
        "‚úÖ <b>–°–æ–±–ª—é–¥–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤</b>\n"
        "‚Ä¢ –†–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ —Ç–æ—á–Ω–æ –≤ –æ–≥–æ–≤–æ—Ä–µ–Ω–Ω—É—é –¥–∞—Ç—É\n"
        "‚Ä¢ –ó–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–æ—Å—Ä–æ—á–∫–∏ - –≤–æ–∑–≤—Ä–∞—Ç 10% –æ—Ç —Å—É–º–º—ã\n\n"
        "‚úÖ <b>–ö–∞—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</b>\n"
        "‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ì–û–°–¢–∞–º –∏ –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–º —É–∫–∞–∑–∞–Ω–∏—è–º\n"
        "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n"
        "‚Ä¢ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è\n\n"
        "‚úÖ <b>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</b>\n"
        "‚Ä¢ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º\n"
        "‚Ä¢ –†–∞–±–æ—Ç–∞–µ–º –±–µ–∑ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã –ø–æ –º–Ω–æ–≥–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º(–µ—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è)\n"
        "‚úÖ <b>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏</b>\n"
        "‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞–±–æ—Ç—É –ø–æ –∑–∞–º–µ—á–∞–Ω–∏—è–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è\n"
        "‚Ä¢ –°—Ä–æ–∫ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ - –¥–æ 3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π\n"
        "‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–æ–∫\n\n"
        "‚úÖ <b>–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤</b>\n"
        "‚Ä¢ –ü–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –Ω–∞—Ä—É—à–µ–Ω–∏–∏ —Å—Ä–æ–∫–æ–≤\n"
        "‚Ä¢ –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º\n"
        "‚Ä¢ –í–æ–∑–≤—Ä–∞—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ—Ç –∑–∞–∫–∞–∑–∞\n\n"
        "<b>–ù–∞—à–∞ —Ü–µ–ª—å - –≤–∞—à–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ!</b>\n\n"
        )
        reply_markup = get_common_keyboard()
        
    elif data == "refund":
        text = (
            "üìã <b>–£—Å–ª–æ–≤–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤</b>\n\n"
        "<b>–ú—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:</b>\n\n"
        "‚úÖ <b>–ü–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç:</b>\n"
        "‚Ä¢ –ì—Ä—É–±–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–≥–æ–≤–æ—Ä–µ–Ω–Ω—ã—Ö —Å—Ä–æ–∫–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø–æ –≤–∏–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è\n"
        "‚Ä¢ –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¢–ó\n\n"
        "‚úÖ <b>–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç:</b>\n"
        "‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫\n"
        "‚Ä¢ –ó–∞–¥–µ—Ä–∂–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 24 —á–∞—Å–∞\n\n"
        "‚ùå <b>–í–æ–∑–≤—Ä–∞—Ç –Ω–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è:</b>\n"
        "‚Ä¢ –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º\n"
        "‚Ä¢ –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è\n"
        "‚Ä¢ –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ—Ç —Ä–∞–±–æ—Ç—ã –±–µ–∑ –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏—á–∏–Ω\n"
        "‚Ä¢ –ï—Å–ª–∏ –∑–∞–∫–∞–∑—á–∏–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –Ω–µ–≤–µ—Ä–Ω—ã–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n\n"
        "‚öñÔ∏è <b>–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞:</b>\n"
        "1. –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ @SH_Omsk\n"
        "2. –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤\n"
        "3. –í—ã–ø–ª–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π\n"
        "4. –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Ç–µ –∂–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, —Å –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∞ –æ–ø–ª–∞—Ç–∞\n\n"
        "<b>–í—Å–µ —Å–ø–æ—Ä–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ —Ä–µ—à–∞—é—Ç—Å—è –≤ –ø–æ–ª—å–∑—É –∫–ª–∏–µ–Ω—Ç–∞!</b>\n\n"
        )
        reply_markup = get_common_keyboard()
    
    elif data == "price":
        text = (
            "üí∞ <b>–ü—Ä–∞–π—Å-–ª–∏—Å—Ç –Ω–∞ —É—Å–ª—É–≥–∏</b>\n\n"
        "<b>–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ —É—Å–ª—É–≥–∏:</b>\n\n"
        "üìê <b>–ß–µ—Ä—Ç–µ–∂–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∞:</b>\n"
        "‚Ä¢ –ü—Ä–æ—Å—Ç–æ–π —á–µ—Ä—Ç–µ–∂ (1-2 –≤–∏–¥–∞) ‚Äî –æ—Ç 250 —Ä—É–±.\n"
        "‚Ä¢ –°–ª–æ–∂–Ω—ã–π —á–µ—Ä—Ç–µ–∂ (3+ –≤–∏–¥–æ–≤, —Ä–∞–∑—Ä–µ–∑—ã) ‚Äî –æ—Ç 500 —Ä—É–±.\n"
        "‚Ä¢ –°–±–æ—Ä–æ—á–Ω—ã–π —á–µ—Ä—Ç–µ–∂ ‚Äî –æ—Ç 500 —Ä—É–±.\n"
        "‚Ä¢ –°—Ö–µ–º—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏ ‚Äî –æ—Ç 300 —Ä—É–±.\n\n"
        "üìù <b>–ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã:</b>\n"
        "‚Ä¢ –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –∫—É—Ä—Å–æ–≤–∞—è ‚Äî –æ—Ç 3000 —Ä—É–±.\n"
        "‚Ä¢ –ö—É—Ä—Å–æ–≤–∞—è —Å —Ä–∞—Å—á–µ—Ç–Ω–æ–π —á–∞—Å—Ç—å—é ‚Äî –æ—Ç 2500 —Ä—É–±.\n"
        "‚Ä¢ –ö—É—Ä—Å–æ–≤–∞—è —Å —á–µ—Ä—Ç–µ–∂–∞–º–∏ ‚Äî –æ—Ç 4000 —Ä—É–±.\n"
        "‚Ä¢ –°—Ä–æ—á–Ω–∞—è –∫—É—Ä—Å–æ–≤–∞—è (–¥–æ 3 –¥–Ω–µ–π) ‚Äî +50%\n\n"
        "üî¨ <b>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:</b>\n"
        "‚Ä¢ –ü—Ä–æ—Å—Ç–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è ‚Äî –æ—Ç 500 —Ä—É–±.\n"
        "‚Ä¢ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Å —Ä–∞—Å—á–µ—Ç–∞–º–∏ ‚Äî –æ—Ç 600 —Ä—É–±.\n"
        "‚Ä¢ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ ‚Äî –æ—Ç 700 —Ä—É–±.\n"
        "‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö (–æ—Ç 3 —à—Ç.) ‚Äî —Å–∫–∏–¥–∫–∞ 15%\n\n"
        "üìä <b>–†–∞—Å—á–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:</b>\n"
        "‚Ä¢ –†–∞—Å—á–µ—Ç–Ω–æ-–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã (–†–ì–†) ‚Äî –æ—Ç 1000 —Ä—É–±.\n"
        "‚Ä¢ –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á (1 —à—Ç.) ‚Äî –æ—Ç 150 —Ä—É–±.\n"
        "‚Ä¢ –ü–∞–∫–µ—Ç –∑–∞–¥–∞—á (–æ—Ç 5 —à—Ç.) ‚Äî —Å–∫–∏–¥–∫–∞ 10%\n\n"
        "üìÑ <b>–î—Ä—É–≥–∏–µ —Ä–∞–±–æ—Ç—ã:</b>\n"
        "‚Ä¢ –†–µ—Ñ–µ—Ä–∞—Ç—ã ‚Äî –æ—Ç 500 —Ä—É–±.\n"
        "‚Ä¢ –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî –æ—Ç 300 —Ä—É–±.\n"
        "‚Ä¢ –î–æ–∫–ª–∞–¥—ã ‚Äî –æ—Ç 400 —Ä—É–±.\n"
        "‚Ä¢ –≠—Å—Å–µ ‚Äî –æ—Ç 350 —Ä—É–±.\n\n"
        "‚öñÔ∏è <b>–ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ü–µ–Ω–∞:</b>\n"
        "‚Ä¢ –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –æ–±—ä–µ–º —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –°—Ä–æ—á–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è\n"
        "‚Ä¢ –ù–∞–ª–∏—á–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤\n"
        "‚Ä¢ –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è\n\n"
        "üíé <b>–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å:</b>\n"
        "‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ì–û–°–¢\n"
        "‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º\n"
        "‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ\n\n"
        "<b>–î–∏–ø–ª–æ–º–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ–º!</b>\n\n"
        "<b>–î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏—à–ª–∏—Ç–µ –Ω–∞–º —Å–≤–æ—ë –∑–∞–¥–∞–Ω–∏–µ</b>"
        )
        reply_markup = get_common_keyboard()
    
    elif data == "about":
        text = (
            "üè¢ <b>–û –∫–æ–º–ø–∞–Ω–∏–∏ Student Helper</b>\n\n"
        "<b>Student Helper ‚Äî —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º.</b>\n\n"
        "üéØ <b>–ù–∞—à–∞ –º–∏—Å—Å–∏—è:</b>\n"
        "‚Ä¢ –ü–æ–º–æ–≥–∞—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞–º –æ—Å–≤–∞–∏–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã\n"
        "‚Ä¢ –û—Å–≤–æ–±–æ–∂–¥–∞—Ç—å –≤—Ä–µ–º—è –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω—ã—Ö –∑–∞–¥–∞—á\n"
        "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞\n\n"
        "üìä <b>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</b>\n"
        "‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (—á–µ—Ä—Ç–µ–∂–∏, —Ä–∞—Å—á–µ—Ç—ã, –∑–∞–¥–∞—á–∏)\n"
        "‚Ä¢ –ö—É—Ä—Å–æ–≤—ã–µ –∏ –¥–∏–ø–ª–æ–º–Ω—ã–µ —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –°–ª–æ–∂–Ω—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã\n"
        "‚Ä¢ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ –ì–û–°–¢–∞–º –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º\n"
        "‚Ä¢ –û—Ç–¥–µ–ª—å–Ω—ã–µ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã\n\n"
        "üë®‚Äçüéì <b>–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞:</b>\n"
        "‚Ä¢ –û–ø—ã—Ç–Ω—ã–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏ —ç–∫—Å–ø–µ—Ä—Ç—ã\n"
        "‚Ä¢ –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã-–ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ç—Ä–∞—Å–ª–µ–π\n"
        "‚Ä¢ –í—ã–ø—É—Å–∫–Ω–∏–∫–∏, –∑–Ω–∞—é—â–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –≤—É–∑–∞\n"
        "‚Ä¢ –ú–µ—Ç–æ–¥–∏—Å—Ç—ã –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã\n\n"
        "‚≠êÔ∏è <b>–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>\n"
        "‚Ä¢ –†–∞–±–æ—Ç–∞–µ–º —Å 2018 –≥–æ–¥–∞\n"
        "‚Ä¢ –ë–æ–ª–µ–µ 500 –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç\n"
        "‚Ä¢ –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–∞—Ñ–µ–¥—Ä\n"
        "‚Ä¢ –°—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n"
        "‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É\n\n"
        "<b>–ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º —Ä–∞–±–æ—Ç—ã ‚Äî –º—ã –ø–æ–º–æ–≥–∞–µ–º —É—á–∏—Ç—å—Å—è!</b>\n\n"
        )
        
        reply_markup = get_common_keyboard()
        
    elif data == "stocks":
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é –∞–∫—Ü–∏–π
        reply_markup = get_stocks_menu_keyboard()
        await query.edit_message_text(
            text="üéÅ <b>–ù–∞—à–∏ –∞–∫—Ü–∏–∏</b>\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:",
            reply_markup=reply_markup
        )
        return
        
    elif data == "ref":
        text = (
            "üë• <b>–ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞ - –ø–æ–ª—É—á–∞–π —Å–∫–∏–¥–∫–∏!</b>\n\n"
            "<b>–ü—Ä–∏–≤–æ–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏!</b>\n\n"
            "‚ú® <b>–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:</b>\n"
            "‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –¥—Ä—É–≥—É –æ –Ω–∞—Å\n"
            "‚Ä¢ –î—Ä—É–≥ –ø–∏—à–µ—Ç @SH_Omsk –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à –ª–æ–≥–∏–Ω\n"
            "‚Ä¢ –ú—ã –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∞—à–∏ —Å–∫–∏–¥–∫–∏!\n\n"
            "üéØ <b>–í–ê–®–ê –í–´–ì–û–î–ê:</b>\n"
            "‚Ä¢ <b>1 –¥—Ä—É–≥</b> = 10% –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞\n"
            "‚Ä¢ <b>5 –¥—Ä—É–∑–µ–π</b> = 20% –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∫–∏–¥–∫–∞\n\n"
            "üéÅ <b>–î–õ–Ø –î–†–£–ì–ê:</b>\n"
            "‚Ä¢ 10% —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑\n\n"
            "üìå <b>–í–ê–ñ–ù–û:</b>\n"
            "‚Ä¢ –î—Ä—É–≥ –¥–æ–ª–∂–µ–Ω –Ω–∞–∑–≤–∞—Ç—å –≤–∞—à –ª–æ–≥–∏–Ω –ø—Ä–∏ –∑–∞–∫–∞–∑–µ\n"
            "‚Ä¢ –°–∫–∏–¥–∫–∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è —Å –∞–∫—Ü–∏—è–º–∏\n"
            "‚Ä¢ –û –≤—Å–µ—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è—Ö —Å–æ–æ–±—â–∏–º –≤–∞–º\n\n"
            "<b>–ù–∞—á–∏–Ω–∞–π—Ç–µ –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</b>"
        )
        reply_markup = get_stock_detail_keyboard()
        
    elif data == "stock2":
        text = (
            "üî• <b>–°–∫–∏–¥–∫–∞ 10% –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 2 —Ä–∞–±–æ—Ç</b>\n\n"
            "<b>–ó–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ!</b>\n\n"
            "‚ú® <b>–£–°–õ–û–í–ò–Ø:</b>\n"
            "‚Ä¢ <b>2 –ª—é–±—ã–µ —Ä–∞–±–æ—Ç—ã</b> = —Å–∫–∏–¥–∫–∞ 10% –Ω–∞ –≤—Å—é —Å—É–º–º—É\n"
            "‚Ä¢ <b>3 –∏ –±–æ–ª–µ–µ —Ä–∞–±–æ—Ç</b> = —Å–∫–∏–¥–∫–∞ 10% + –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –æ—á–µ—Ä–µ–¥–∏\n\n"
            "üéØ <b>–ü–û–î–•–û–î–Ø–©–ò–ï –†–ê–ë–û–¢–´:</b>\n"
            "‚Ä¢ –ß–µ—Ä—Ç–µ–∂–∏ –≤ –ö–û–ú–ü–ê–°\n"
            "‚Ä¢ –ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã\n"
            "‚Ä¢ –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á\n"
            "‚Ä¢ –†–∞—Å—á–µ—Ç–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è\n\n"
            "üí° <b>–ü–†–ò–ú–ï–†–´ –í–´–ì–û–î–´:</b>\n"
            "‚Ä¢ <b>2 —á–µ—Ä—Ç–µ–∂–∞</b> = —ç–∫–æ–Ω–æ–º–∏—è –æ—Ç 100 —Ä—É–±–ª–µ–π\n"
            "‚Ä¢ <b>–ö—É—Ä—Å–æ–≤–∞—è + –∑–∞–¥–∞—á–∏</b> = —ç–∫–æ–Ω–æ–º–∏—è –æ—Ç 200 —Ä—É–±–ª–µ–π\n\n"
            "üìå <b>–£–°–õ–û–í–ò–Ø:</b>\n"
            "‚Ä¢ –°–∫–∏–¥–∫–∞ –Ω–∞ –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n"
            "‚Ä¢ –†–∞–±–æ—Ç—ã –ø–æ –ª—é–±—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º\n"
            "‚Ä¢ –ù–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π\n\n"
            "<b>–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ!</b>"
        )
        reply_markup = get_stock_detail_keyboard()
        
    elif data == "stock1":
        text = (
            "üéÅ <b>–°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑</b>\n\n"
            "<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Student Helper! –î–∞—Ä–∏–º —Å–∫–∏–¥–∫—É –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º.</b>\n\n"
            "‚ú® <b>–ö–ê–ö –ü–û–õ–£–ß–ò–¢–¨:</b>\n"
            "‚Ä¢ –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º @SH_Omsk\n"
            "‚Ä¢ –°–æ–æ–±—â–∏—Ç–µ –æ —Å–∫–∏–¥–∫–µ –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑\n"
            "‚Ä¢ –ü—Ä–∏—à–ª–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞\n\n"
            "üéØ <b>–ß–¢–û –í–ö–õ–Æ–ß–ê–ï–¢–°–Ø:</b>\n"
            "‚Ä¢ –ß–µ—Ä—Ç–µ–∂–∏ –≤ –ö–û–ú–ü–ê–°\n"
            "‚Ä¢ –ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã\n"
            "‚Ä¢ –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á\n"
            "‚Ä¢ –†–∞—Å—á–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã\n\n"
            "üìå <b>–í–ê–ñ–ù–û:</b>\n"
            "‚Ä¢ –¢–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤\n"
            "‚Ä¢ –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ü–∏—è–º–∏\n"
            "‚Ä¢ –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ –≤–∏–¥—ã —Ä–∞–±–æ—Ç\n\n"
            "<b>–ù–µ —É–ø—É—Å—Ç–∏—Ç–µ –≤—ã–≥–æ–¥—É - –∑–∞–∫–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–π—á–∞—Å!</b>"
        )
        reply_markup = get_stock_detail_keyboard()

    elif data == "stock3":
        text = (
            "üì¢ <b>–ê–∫—Ü–∏—è: +5% —Å–∫–∏–¥–∫–∞ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª</b>\n\n"
        "<b>–ü–æ–ª—É—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É 5% –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª Student Helper!</b>\n\n"
        "‚ú® <b>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É:</b>\n"
        "1. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª: @SH_Public\n"
        "2. –°–æ–æ–±—â–∏—Ç–µ –æ–± —ç—Ç–æ–º –ø—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞\n"
        "3. –ü–æ–ª—É—á–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É 5% –∫ –≤–∞—à–µ–º—É –∑–∞–∫–∞–∑—É\n\n"
        "üéØ <b>–£—Å–ª–æ–≤–∏—è –∞–∫—Ü–∏–∏:</b>\n"
        "‚Ä¢ –°–∫–∏–¥–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ –≤–∏–¥—ã —Ä–∞–±–æ—Ç\n"
        "‚Ä¢ –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ü–∏—è–º–∏\n"
        "‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞\n"
        "‚Ä¢ –°–∫–∏–¥–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏\n\n"
        "üí° <b>–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:</b>\n"
        "‚Ä¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —ç–∫–æ–Ω–æ–º–∏—é –Ω–∞ –∑–∞–∫–∞–∑–µ\n"
        "‚Ä¢ –û–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∞–∫—Ü–∏—è—Ö\n"
        "‚Ä¢ –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Å–æ–≤–µ—Ç—ã –ø–æ —É—á–µ–±–µ\n"
        "‚Ä¢ –ü–µ—Ä–≤—ã–º–∏ —É–∑–Ω–∞–µ—Ç–µ –æ —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö\n\n"
        "üìå <b>–í–∞–∂–Ω–æ:</b>\n"
        "‚Ä¢ –ê–∫—Ü–∏—è –±–µ—Å—Å—Ä–æ—á–Ω–∞—è\n"
        "‚Ä¢ –°–∫–∏–¥–∫–∞ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏\n"
        "‚Ä¢ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –æ–¥–Ω–∞ —Å–∫–∏–¥–∫–∞ –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É\n\n"
        "<b>–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ –±–æ–ª—å—à–µ!</b>\n\n"
        "<b>–ù–∞—à –∫–∞–Ω–∞–ª: @SH_Public</b>\n"
        )
        reply_markup = get_common_keyboard()
        
        elif data == "diploma":
        text = (
        "üéì <b>–î–∏–ø–ª–æ–º–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ–¥ –∫–ª—é—á</b>\n\n"
    
        "<b>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –¥–∏–ø–ª–æ–º–∞:</b>\n"
        "‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥\n"
        "‚Ä¢ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–∞—Ñ–µ–¥—Ä—ã\n"
        "‚Ä¢ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ –ì–û–°–¢\n"
        "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ –∑–∞—â–∏—Ç—ã\n\n"
        
        "üí° <b>–ó–∞—á–µ–º —Ç—Ä–∞—Ç–∏—Ç—å –º–µ—Å—è—Ü—ã –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É —Å–∞–º–æ–º—É?</b>\n"
        "–£—á—ë–±–∞, —Ä–∞–±–æ—Ç–∞, –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –Ω–∞ –¥–∏–ø–ª–æ–º —á–∞—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è –≤—Ä–µ–º–µ–Ω–∏.\n"
        "–î–µ–ª–µ–≥–∏—Ä—É–π—Ç–µ ‚Äî —Å—ç–∫–æ–Ω–æ–º—å—Ç–µ —Å–∏–ª—ã, –Ω–µ—Ä–≤—ã –∏ –Ω–µ–¥–µ–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.\n"
        "–ú—ã —Å–¥–µ–ª–∞–µ–º –≤—Å—ë –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –∏ –≤–æ–≤—Ä–µ–º—è, –ø–æ–∫–∞ –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –≤–∞–∂–Ω—ã–º–∏ –¥–µ–ª–∞–º–∏.\n\n"
        
        "üí∞ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å: –æ—Ç 15 000 ‚ÇΩ</b>\n\n"
        
        "<b>–≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã:</b>\n"
        "1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–º—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π\n"
        "2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ\n"
        "3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ\n"
        "4. –ü–æ–º–æ—â—å —Å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ —Ä–µ—á—å—é\n\n"
    
        "üõ° <b>–ì–∞—Ä–∞–Ω—Ç–∏–∏:</b>\n"
        "‚Ä¢ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã\n"
        "‚Ä¢ –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n"
        "‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–æ –∑–∞—â–∏—Ç—ã\n\n"
        
        "<b>–î–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:</b>\n"
        "‚Ä¢ –¢–µ–º—É –¥–∏–ø–ª–æ–º–∞\n"
        "‚Ä¢ –ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã\n"
        "‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)\n\n"
        
        "üëá –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏"
        )
        reply_markup = get_stock_detail_keyboard()
        
    elif data == "main_menu":
        # –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        reply_markup = get_main_menu_keyboard()
        await query.edit_message_text(
            "<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Student Helper! üéì</b>\n\n"
            "<b>–ú—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–º–æ—â–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º.</b>\n\n"
            "<b>üìå –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</b>\n"
            "‚Ä¢ –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á\n" 
            "‚Ä¢ –ö—É—Ä—Å–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã\n"
            "‚Ä¢ –ß–µ—Ä—Ç–µ–∂–∏ –≤ –ö–û–ú–ü–ê–°\n"
            "‚Ä¢ –†–∞—Å—á–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã\n\n"
            "<b>‚ö°Ô∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>\n"
            "‚Ä¢ –°–æ–±–ª—é–¥–µ–Ω–∏–µ –ì–û–°–¢–æ–≤ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤\n"
            "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è —Å—Ä–æ–∫–æ–≤\n"
            "‚Ä¢ –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å\n"
            "‚Ä¢ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã\n\n"
            "<b>üëá –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:</b>",
            reply_markup=reply_markup
        )
        return
        
    else:
        text = "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
        reply_markup = get_common_keyboard()
    
    await query.edit_message_text(
        text=text,
        reply_markup=reply_markup
    )

def main() -> None:
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ parse_mode –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    defaults = Defaults(parse_mode='HTML')
    application = Application.builder()\
        .token("8359439615:AAGvmWIiF4LgZ22NgqDR6CdG5jzZalZ1LHY")\
        .defaults(defaults)\
        .build()
    
    application.add_handler(CommandHandler("start", start))
    application.add_handler(CallbackQueryHandler(button_handler))
    
    application.run_polling()

if __name__ == "__main__":
    main()











